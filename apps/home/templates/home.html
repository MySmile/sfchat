{% extends "base.html" %}
{% load staticfiles %}{% load i18n %}{% get_current_language as LANGUAGE_CODE %}

{% block css %}{% endblock %}
{% block js %}{% endblock %}

{% block google_analytics %}
<script type="text/javascript">
$(document).ready(function() {

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-57194449-1', 'auto');
    ga('send', 'pageview', {
      'anonymizeIp': true,
    });


    var createChat = document.getElementById('create_chat');
    var joinChat = document.getElementById('join_chat');

    addListener(createChat, 'click', function() {
      ga('send', 'event', 'button', 'click', 'create new chat');
    });

    addListener(joinChat, 'click', function() {
      ga('send', 'event', 'button', 'click', 'join to chat');
    });


    /**
     * Utility to wrap the different behaviors between W3C-compliant browsers
     * and IE when adding event handlers.
     *
     * @param {Object} element Object on which to attach the event listener.
     * @param {string} type A string representing the event type to listen for
     *     (e.g. load, click, etc.).
     * @param {function()} callback The function that receives the notification.
     */
    function addListener(element, type, callback) {
     if (element.addEventListener) element.addEventListener(type, callback);
     else if (element.attachEvent) element.attachEvent('on' + type, callback);
    }

});

</script>
{% endblock %}

{% block meta %}<meta name="description" content=""  />
<meta name="keywords" content="" />
<title>{% trans "SFChat &mdash; Secure Free Chat" %}</title>
{% endblock %}

{% block main %}
    <aside id="chat-entry">
        <form method="POST" action="/create-chat/">{% csrf_token %}
            {{ form_create_chat }}
            <button id="create_chat" class="btn btn-green" type="submit" >
                {% trans "create new" %}
            </button>
        </form>
        <div id='or'>{% trans "OR" %}</div>
        <form method="POST">{% csrf_token %}
            {{ form }}<button id="join_chat" class="btn btn-orange" type="submit">{% trans "join" %}</button>
        </form>
    </aside>
    <hr>
    <div id="arrow-down"></div>    
    <article id="intro">{% blocktrans %}
        <h2>Chat:</h2>
        <ol>
            <li>Click to "create chat"</li>
            <li>Send code with link to friend</li>
            <li>Enjoy free secure chatting!</li>
        </ol>
        <h2>Secure because:</h2>
        <ol>
            <li>Use SSL</li>
            <li>Chat history is not saved on server</li>
        </ol>
        <h2>Free considering:</h2>
        <ol>
            <li>Open source</li>
            <li>GNU license</li>
        </ol>
    {% endblocktrans %}    
    </article>
{% endblock %}

